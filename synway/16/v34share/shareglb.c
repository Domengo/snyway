/*****************************************************************************
*             Copyright (c) 1995 - 20xx by GAO Research Inc.                 *
*                          All rights reserved.                              *
*                                                                            *
*  This program is a confidential and an unpublished work of GAO Research    *
*  Inc. that is protected under international and Canadian copyright laws.   *
*  This program is a trade secret and constitutes valuable property of GAO   *
*  Research Inc. All use, reproduction and/or disclosure in whole or in      *
*  part of this program is strictly prohibited unless expressly authorized   *
*  in writing by GAO Research Inc.                                           *
*****************************************************************************/

#include "shareext.h"

#if 1 /* compact two byte table into one word table, benifit to DSP */

#define IR(x,y)   ( ((SWORD)(x)<<8) | ((SWORD)(y)&0xFF) )

// the quater superconstellation
CONST SWORD V34_tRI[416] =
{
    IR(1,  1), IR(-3,  1), IR(1, -3), IR(-3, -3), IR(1,  5), IR(5,  1),
    IR(-3,  5), IR(5, -3), IR(5,  5), IR(-7,  1), IR(1, -7), IR(-7, -3),
    IR(-3, -7), IR(-7,  5), IR(5, -7), IR(1,  9), IR(9,  1), IR(-3,  9),
    IR(9, -3), IR(-7, -7), IR(5,  9), IR(9,  5), IR(-11,  1), IR(1, -11),
    IR(-7,  9), IR(-11, -3), IR(9, -7), IR(-3, -11), IR(-11,  5), IR(5, -11),
    IR(9,  9), IR(1, 13), IR(13,  1), IR(-11, -7), IR(-7, -11), IR(-3, 13),
    IR(13, -3), IR(5, 13), IR(13,  5), IR(-11,  9), IR(9, -11), IR(-7, 13),
    IR(13, -7), IR(-15,  1), IR(1, -15), IR(-15, -3), IR(-3, -15), IR(-11, -11),
    IR(9, 13), IR(13,  9), IR(-15,  5), IR(5, -15), IR(-15, -7), IR(-7, -15),
    IR(1, 17), IR(-11, 13), IR(17,  1), IR(13, -11), IR(-3, 17), IR(17, -3),
    IR(-15,  9), IR(9, -15), IR(5, 17), IR(17,  5), IR(-7, 17), IR(13, 13),
    IR(17, -7), IR(-15, -11), IR(-11, -15), IR(-19,  1), IR(1, -19), IR(9, 17),
    IR(17,  9), IR(-19, -3), IR(-3, -19), IR(-19,  5), IR(5, -19), IR(-15, 13),
    IR(13, -15), IR(-11, 17), IR(-19, -7), IR(17, -11), IR(-7, -19), IR(1, 21),
    IR(-19,  9), IR(21,  1), IR(9, -19), IR(-3, 21), IR(21, -3), IR(-15, -15),
    IR(13, 17), IR(17, 13), IR(5, 21), IR(21,  5), IR(-19, -11), IR(-11, -19),
    IR(-7, 21), IR(21, -7), IR(-15, 17), IR(17, -15), IR(9, 21), IR(21,  9),
    IR(-19, 13), IR(-23,  1), IR(13, -19), IR(1, -23), IR(-23, -3), IR(-3, -23),
    IR(-23,  5), IR(5, -23), IR(-11, 21), IR(21, -11), IR(17, 17), IR(-23, -7),
    IR(-7, -23), IR(-19, -15), IR(-15, -19), IR(13, 21), IR(21, 13), IR(-23,  9),
    IR(9, -23), IR(1, 25), IR(25,  1), IR(-3, 25), IR(25, -3), IR(5, 25),
    IR(-19, 17), IR(25,  5), IR(-23, -11), IR(17, -19), IR(-11, -23), IR(-15, 21),
    IR(21, -15), IR(-7, 25), IR(25, -7), IR(-23, 13), IR(13, -23), IR(9, 25),
    IR(25,  9), IR(-19, -19), IR(17, 21), IR(21, 17), IR(-27,  1), IR(1, -27),
    IR(-27, -3), IR(-3, -27), IR(-11, 25), IR(25, -11), IR(-27,  5), IR(-23, -15),
    IR(-15, -23), IR(5, -27), IR(-27, -7), IR(-7, -27), IR(13, 25), IR(25, 13),
    IR(-19, 21), IR(21, -19), IR(-27,  9), IR(9, -27), IR(-23, 17), IR(17, -23),
    IR(1, 29), IR(29,  1), IR(-3, 29), IR(-15, 25), IR(29, -3), IR(-27, -11),
    IR(25, -15), IR(-11, -27), IR(5, 29), IR(29,  5), IR(21, 21), IR(-7, 29),
    IR(29, -7), IR(-23, -19), IR(-19, -23), IR(-27, 13), IR(13, -27), IR(17, 25),
    IR(25, 17), IR(9, 29), IR(29,  9), IR(-27, -15), IR(-15, -27), IR(-11, 29),
    IR(-31,  1), IR(29, -11), IR(1, -31), IR(-23, 21), IR(-31, -3), IR(21, -23),
    IR(-3, -31), IR(-19, 25), IR(-31,  5), IR(25, -19), IR(5, -31), IR(13, 29),
    IR(29, 13), IR(-31, -7), IR(-7, -31), IR(-27, 17), IR(17, -27), IR(-31,  9),
    IR(9, -31), IR(-23, -23), IR(-15, 29), IR(21, 25), IR(25, 21), IR(29, -15),
    IR(-31, -11), IR(-11, -31), IR(1, 33), IR(33,  1), IR(-27, -19), IR(-19, -27),
    IR(-3, 33), IR(33, -3), IR(5, 33), IR(33,  5), IR(17, 29), IR(29, 17),
    IR(-31, 13), IR(13, -31), IR(- 7, 33), IR(33, -7), IR(-23, 25), IR(25, -23),
    IR(9, 33), IR(-27, 21), IR(33,  9), IR(21, -27), IR(-31, -15), IR(-15, -31),
    IR(-19, 29), IR(29, -19), IR(-11, 33), IR(33, -11), IR(-35,  1), IR(1, -35),
    IR(-35, -3), IR(-3, -35), IR(25, 25), IR(-31, 17), IR(-35,  5), IR(17, -31),
    IR(5, -35), IR(13, 33), IR(33, 13), IR(-27, -23), IR(-23, -27), IR(-35, -7),
    IR(-7, -35), IR(21, 29), IR(29, 21), IR(-35,  9), IR(9, -35), IR(-15, 33),
    IR(33, -15), IR(-31, -19), IR(-19, -31), IR(-35, -11), IR(-11, -35), IR(-27, 25),
    IR(25, -27), IR(1, 37), IR(-23, 29), IR(37,  1), IR(29, -23), IR(-3, 37),
    IR(17, 33), IR(33, 17), IR(37, -3), IR(5, 37), IR(-35, 13), IR(37,  5),
    IR(13, -35), IR(-31, 21), IR(21, -31), IR(-7, 37), IR(37, -7), IR(9, 37),
    IR(-19, 33), IR(37,  9), IR(-35, -15), IR(33, -19), IR(-15, -35), IR(-27, -27),
    IR(25, 29), IR(29, 25), IR(-11, 37), IR(37, -11), IR(-31, -23), IR(-23, -31),
    IR(-35, 17), IR(17, -35), IR(-39,  1), IR(1, -39), IR(21, 33), IR(33, 21),
    IR(-39, -3), IR(-3, -39), IR(13, 37), IR(37, 13), IR(-39,  5), IR(5, -39),
    IR(-27, 29), IR(-39, -7), IR(29, -27), IR(-7, -39), IR(-31, 25), IR(-35, -19),
    IR(25, -31), IR(-19, -35), IR(-15, 37), IR(37, -15), IR(-39,  9), IR(9, -39),
    IR(-23, 33), IR(33, -23), IR(-39, -11), IR(-11, -39), IR(17, 37), IR(37, 17),
    IR(-35, 21), IR(21, -35), IR(1, 41), IR(29, 29), IR(41,  1), IR(-3, 41),
    IR(-39, 13), IR(41, -3), IR(-31, -27), IR(-27, -31), IR(13, -39), IR(5, 41),
    IR(41,  5), IR(25, 33), IR(33, 25), IR(-7, 41), IR(-19, 37), IR(41, -7),
    IR(37, -19), IR(-39, -15), IR(-15, -39), IR(-35, -23), IR(-23, -35), IR(9, 41),
    IR(41,  9), IR(-11, 41), IR(-31, 29), IR(41, -11), IR(29, -31), IR(21, 37),
    IR(37, 21), IR(-39, 17), IR(17, -39), IR(-27, 33), IR(33, -27), IR(13, 41),
    IR(-35, 25), IR(41, 13), IR(-43,  1), IR(25, -35), IR(1, -43), IR(-43, -3),
    IR(-3, -43), IR(-43,  5), IR(5, -43), IR(-39, -19), IR(-19, -39), IR(-23, 37),
    IR(-43, -7), IR(37, -23), IR(-7, -43), IR(-15, 41), IR(41, -15), IR(-31, -31),
    IR(29, 33), IR(33, 29), IR(-43,  9), IR(9, -43), IR(-35, -27), IR(-27, -35),
    IR(-39, 21), IR(21, -39), IR(17, 41), IR(41, 17), IR(-43, -11), IR(-11, -43),
    IR(25, 37), IR(37, 25), IR(-43, 13), IR(13, -43), IR(1, 45), IR(45,  1),
    IR(-3, 45), IR(45, -3), IR(-19, 41), IR(41, -19), IR(5, 45), IR(-31, 33),
    IR(45,  5), IR(-39, -23), IR(33, -31), IR(-23, -39), IR(-35, 29), IR(29, -35),
    IR(-7, 45), IR(45, -7), IR(-43, -15), IR(-15, -43), IR(-27, 37), IR(37, -27),
    IR(9, 45), IR(45,  9)
};

#else

CONST SBYTE V34_tR[416] =
{
    1,  -3,   1,  -3,   1,   5,  -3,   5,   5,  -7,   1,  -7,
    -3,  -7,   5,   1,   9,  -3,   9,  -7,   5,   9, -11,   1,
    -7, -11,   9,  -3, -11,   5,   9,   1,  13, -11,  -7,  -3,
    13,   5,  13, -11,   9,  -7,  13, -15,   1, -15,  -3, -11,
    9,  13, -15,   5, -15,  -7,   1, -11,  17,  13,  -3,  17,
    -15,   9,   5,  17,  -7,  13,  17, -15, -11, -19,   1,   9,
    17, -19,  -3, -19,   5, -15,  13, -11, -19,  17,  -7,   1,
    -19,  21,   9,  -3,  21, -15,  13,  17,   5,  21, -19, -11,
    -7,  21, -15,  17,   9,  21, -19, -23,  13,   1, -23,  -3,
    -23,   5, -11,  21,  17, -23,  -7, -19, -15,  13,  21, -23,
    9,   1,  25,  -3,  25,   5, -19,  25, -23,  17, -11, -15,
    21,  -7,  25, -23,  13,   9,  25, -19,  17,  21, -27,   1,
    -27,  -3, -11,  25, -27, -23, -15,   5, -27,  -7,  13,  25,
    -19,  21, -27,   9, -23,  17,   1,  29,  -3, -15,  29, -27,
    25, -11,   5,  29,  21,  -7,  29, -23, -19, -27,  13,  17,
    25,   9,  29, -27, -15, -11, -31,  29,   1, -23, -31,  21,
    -3, -19, -31,  25,   5,  13,  29, -31,  -7, -27,  17, -31,
    9, -23, -15,  21,  25,  29, -31, -11,   1,  33, -27, -19,
    -3,  33,   5,  33,  17,  29, -31,  13, - 7,  33, -23,  25,
    9, -27,  33,  21, -31, -15, -19,  29, -11,  33, -35,   1,
    -35, -3, 25, -31, -35, 17,  5, 13, 33, -27, -23, -35,
    -7, 21, 29, -35,  9, -15, 33, -31, -19, -35, -11, -27,
    25,  1, -23, 37, 29, -3, 17, 33, 37,  5, -35, 37,
    13, -31, 21, -7, 37,  9, -19, 37, -35, 33, -15, -27,
    25, 29, -11, 37, -31, -23, -35, 17, -39,  1, 21, 33,
    -39, -3, 13, 37, -39,  5, -27, -39, 29, -7, -31, -35,
    25, -19, -15, 37, -39,  9, -23, 33, -39, -11, 17, 37,
    -35, 21,  1, 29, 41, -3, -39, 41, -31, -27, 13,  5,
    41, 25, 33, -7, -19, 41, 37, -39, -15, -35, -23,  9,
    41, -11, -31, 41, 29, 21, 37, -39, 17, -27, 33, 13,
    -35, 41, -43, 25,  1, -43, -3, -43,  5, -39, -19, -23,
    -43, 37, -7, -15, 41, -31, 29, 33, -43,  9, -35, -27,
    -39, 21, 17, 41, -43, -11, 25, 37, -43, 13,  1, 45,
    -3, 45, -19, 41,  5, -31, 45, -39, 33, -23, -35, 29,
    -7, 45, -43, -15, -27, 37,  9, 45
};

#endif

#if V34AUXCH
CONST UBYTE V34_tMAP_M[6][28][2] =
#else
CONST UBYTE V34_tMAP_M[6][14][2] =
#endif
{
    /* SYMBOL RATE 2400 */
    {
        { 1,  1},
        { 2,  2},
        { 3,  4},
        { 6,  7},
        {12, 14},
        {12, 14},
        {12, 14},
        {12, 14},
        {12, 14},
        { 0,  0},
        { 0,  0},
        { 0,  0},
        { 0,  0},
        { 0,  0}
#if V34AUXCH
        ,
        { 1,  1},
        { 2,  2},
        { 4,  4},
        { 7,  8},
        {13, 15},
        {13, 15},
        {13, 15},
        {13, 15},
        {13, 15},
        { 0,  0},
        { 0,  0},
        { 0,  0},
        { 0,  0},
        { 0,  0}
#endif
    },

    /* SYMBOL RATE 2743 */
    {
        { 0,  0},
        { 2,  2},
        { 3,  3},
        { 4,  5},
        { 8,  9},
        {14, 17},
        {13, 15},
        {12, 14},
        {11, 13},
        {10, 12},
        { 9, 11},
        { 0,  0},
        { 0,  0},
        { 0,  0}
#if V34AUXCH
        ,
        { 0,  0},
        { 2,  2},
        { 3,  3},
        { 5,  5},
        { 8, 10},
        {15, 18},
        {14, 17},
        {13, 15},
        {12, 14},
        {11, 13},
        {10, 12},
        { 0,  0},
        { 0,  0},
        { 0,  0}
#endif
    },

    /* SYMBOL RATE 2800 */
    {
        {0, 0},
        {2, 2},
        {3, 3},
        {4, 5},
        {8, 9},
        {14, 17},
        {12, 14},
        {11, 13},
        {10, 12},
        {9, 11},
        {8, 10},
        {0, 0},
        {0, 0},
        {0, 0}
#if V34AUXCH
        ,
        {0, 0},
        {2, 2},
        {3, 3},
        {4, 5},
        {8, 9},
        {14, 17},
        {13, 15},
        {12, 14},
        {11, 13},
        {10, 12},
        {8, 10},
        {0, 0},
        {0, 0},
        {0, 0}
#endif
    },

    /* SYMBOL RATE 3000 */
    {
        {0, 0},
        {2, 2},
        {2, 3},
        {4, 4},
        {6, 7},
        {11, 13},
        {9, 11},
        {8, 10},
        {14, 17},
        {12, 14},
        {11, 13},
        {9, 11},
        {0, 0},
        {0, 0}
#if V34AUXCH
        ,
        {0, 0},
        {2, 2},
        {2, 3},
        {4, 5},
        {7, 8},
        {11, 13},
        {10, 12},
        {8, 10},
        {15, 18},
        {13, 15},
        {11, 13},
        {10, 12},
        {0, 0},
        {0, 0}
#endif
    },

    /* SYMBOL RATE 3200 */
    {
        {0, 0},
        {1, 1},
        {2, 2},
        {3, 4},
        {5, 6},
        {8, 10},
        {14, 17},
        {12, 14},
        {10, 12},
        {8, 10},
        {14, 17},
        {12, 14},
        {10, 12},
        {0, 0}
#if V34AUXCH
        ,
        {0, 0},
        {2, 2},
        {2, 2},
        {4, 4},
        {6, 6},
        {9, 11},
        {15, 18},
        {13, 15},
        {11, 13},
        {9, 11},
        {15, 18},
        {13, 15},
        {11, 13},
        {0, 0}
#endif
    },

    /* SYMBOL RATE 3429 */
    {
        {0, 0},
        {1, 1},
        {2, 2},
        {3, 3},
        {4, 5},
        {7, 8},
        {12, 14},
        {9, 11},
        {15, 18},
        {12, 14},
        {10, 12},
        {8, 10},
        {13, 15},
        {11, 13}
#if V34AUXCH
        ,
        {0, 0},
        {1, 1},
        {2, 2},
        {3, 3},
        {5, 5},
        {8, 9},
        {12, 14},
        {10, 12},
        {15, 18},
        {13, 15},
        {11, 13},
        {8, 10},
        {14, 17},
        {11, 13}
#endif
    }
};

/* Table of initial modem parameters for all symbol rate and bit rate */
#if V34AUXCH
CONST ModemData V34_tINIT_PARA_DATA[6][28] =
#else
CONST ModemData V34_tINIT_PARA_DATA[6][14] =
#endif
{
    /* SYMBOL rate 2400 */
    {
        { 8, 0, 8, 7, 0xDB6, 0xFFF, 12, 1, 0}, /* 2400bps */
        {16, 4, 8, 7, 0xDB6, 0xFFF, 12, 2, 0}, /* 4800bps */
        {24, 12, 8, 7, 0xDB6, 0xFFF, 12, 3, 0}, /* 7200bps */
        {32, 20, 8, 7, 0xDB6, 0xFFF, 12, 4, 0}, /* 9600bps */
        {40, 28, 8, 7, 0xDB6, 0xFFF, 12, 5, 0}, /* 12000bps */
        {48, 28, 8, 7, 0xDB6, 0xFFF, 12, 6, 0}, /* 14400bps */
        {56, 28, 8, 7, 0xDB6, 0xFFF, 12, 7, 0}, /* 16800bps */
        {64, 28, 8, 7, 0xDB6, 0xFFF, 12, 8, 0}, /* 19200bps */
        {72, 28, 8, 7, 0xDB6, 0xFFF, 12, 9, 0}, /* 21600bps */
        { 0, 0, 0, 0,    0,    0, 0, 0, 0}, /* 24000bps Not support */
        { 0, 0, 0, 0,    0,    0, 0, 0, 0}, /* 26400bps Not support */
        { 0, 0, 0, 0,    0,    0, 0, 0, 0}, /* 28800bps Not support */
        { 0, 0, 0, 0,    0,    0, 0, 0, 0}, /* 31200bps Not support */
        { 0, 0, 0, 0,    0,    0, 0, 0, 0}, /* 33600bps Not support */
#if V34AUXCH
        { 9, 0, 8, 7, 0xDB6, 0xDB6, 12, 1, 1}, /* 2600bps */
        {17, 5, 8, 7, 0xDB6, 0xDB6, 12, 2, 1}, /* 5000bps */
        {25, 13, 8, 7, 0xDB6, 0xDB6, 12, 3, 1}, /* 7400bps */
        {33, 21, 8, 7, 0xDB6, 0xDB6, 12, 4, 1}, /* 9800bps */
        {41, 29, 8, 7, 0xDB6, 0xDB6, 12, 5, 1}, /* 12200bps */
        {49, 29, 8, 7, 0xDB6, 0xDB6, 12, 6, 1}, /* 14600bps */
        {57, 29, 8, 7, 0xDB6, 0xDB6, 12, 7, 1}, /* 17000bps */
        {65, 29, 8, 7, 0xDB6, 0xDB6, 12, 8, 1}, /* 19400bps */
        {73, 29, 8, 7, 0xDB6, 0xDB6, 12, 9, 1}, /* 21800bps */
        { 0, 0, 0, 0,    0,    0, 0, 0, 0}, /* 24200bps Not support */
        { 0, 0, 0, 0,    0,    0, 0, 0, 0}, /* 26600bps Not support */
        { 0, 0, 0, 0,    0,    0, 0, 0, 0}, /* 29000bps Not support */
        { 0, 0, 0, 0,    0,    0, 0, 0, 0}, /* 31400bps Not support */
        { 0, 0, 0, 0,    0,    0, 0, 0, 0} /* 33800bps Not support */
#endif
    },
    /* SYMBOL rate 2743 */
    {
        { 0, 0, 0, 0,    0,    0, 0, 0, 0}, /* 2400bps Not support */
        {14, 2, 7, 8, 0xD6A, 0xFFF, 12, 1, 6}, /* 4800bps */
        {21, 9, 7, 8, 0xD6A, 0xFFF, 12, 2, 5}, /* 7200bps */
        {28, 16, 7, 8, 0xD6A, 0xFFF, 12, 3, 4}, /* 9600bps */
        {35, 23, 7, 8, 0xD6A, 0xFFF, 12, 4, 3}, /* 12000bps */
        {42, 30, 7, 8, 0xD6A, 0xFFF, 12, 5, 2}, /* 14400bps */
        {49, 29, 7, 8, 0xD6A, 0xFFF, 12, 6, 1}, /* 16800bps */
        {56, 28, 7, 8, 0xD6A, 0xFFF, 12, 7, 0}, /* 19200bps */
        {63, 27, 7, 8, 0xD6A, 0xFFF, 12, 7, 7}, /* 21600bps */
        {70, 26, 7, 8, 0xD6A, 0xFFF, 12, 8, 6}, /* 24000bps */
        {77, 25, 7, 8, 0xD6A, 0xFFF, 12, 9, 5}, /* 26400bps */
        { 0, 0, 0, 0,    0,    0, 0, 0, 0}, /* 28800bps Not support */
        { 0, 0, 0, 0,    0,    0, 0, 0, 0}, /* 31200bps Not support */
        { 0, 0, 0, 0,    0,    0, 0, 0, 0}, /* 33600bps Not support */
#if V34AUXCH
        { 0, 0, 0, 0,    0,    0, 0, 0, 0}, /* 2600bps Not support */
        {15, 3, 7, 8, 0xD6A, 0xD6A, 12, 1, 7}, /* 5000bps */
        {22, 10, 7, 8, 0xD6A, 0xD6A, 12, 2, 6}, /* 7400bps */
        {29, 17, 7, 8, 0xD6A, 0xD6A, 12, 3, 5}, /* 9800bps */
        {36, 24, 7, 8, 0xD6A, 0xD6A, 12, 4, 4}, /* 12200bps */
        {43, 31, 7, 8, 0xD6A, 0xD6A, 12, 5, 3}, /* 14600bps */
        {50, 30, 7, 8, 0xD6A, 0xD6A, 12, 6, 2}, /* 17000bps */
        {57, 29, 7, 8, 0xD6A, 0xD6A, 12, 7, 1}, /* 19400bps */
        {64, 28, 7, 8, 0xD6A, 0xD6A, 12, 8, 0}, /* 21800bps */
        {71, 27, 7, 8, 0xD6A, 0xD6A, 12, 8, 7}, /* 24200bps */
        {78, 26, 7, 8, 0xD6A, 0xD6A, 12, 9, 6}, /* 26600bps Not support */
        { 0, 0, 0, 0,    0,    0, 0, 0, 0}, /* 29000bps Not support */
        { 0, 0, 0, 0,    0,    0, 0, 0, 0}, /* 31400bps Not support */
        { 0, 0, 0, 0,    0,    0, 0, 0, 0} /* 33800bps Not support */
#endif
    },
    /* SYMBOL rate 2800 */
    {
        { 0, 0, 0, 0,     0,     0, 0, 0, 0}, /* 2400bps Not support */
        {14, 2, 8, 7, 0x6AD4, 0x3B76, 14, 1, 6}, /* 4800bps */
        {21, 9, 8, 7, 0x6AD4, 0x356A, 14, 2, 5}, /* 7200bps */
        {28, 16, 8, 7, 0x6AD4, 0x2A54, 14, 3, 4}, /* 9600bps */
        {35, 23, 8, 7, 0x6AD4, 0x2448, 14, 4, 3}, /* 12000bps */
        {42, 30, 8, 7, 0x6AD4, 0x2040, 14, 5, 2}, /* 14400bps */
        {48, 28, 8, 7, 0x6AD4, 0x3FFF, 14, 6, 0}, /* 16800bps */
        {55, 27, 8, 7, 0x6AD4, 0x3F7E, 14, 6, 7}, /* 19200bps */
        {62, 26, 8, 7, 0x6AD4, 0x3B76, 14, 7, 6}, /* 21600bps */
        {69, 25, 8, 7, 0x6AD4, 0x356A, 14, 8, 5}, /* 24000bps */
        {76, 24, 8, 7, 0x6AD4, 0x2A54, 14, 9, 4}, /* 26400bps  */
        { 0, 0, 0, 0,     0,     0, 0, 0, 0}, /* 28800bps Not support */
        { 0, 0, 0, 0,     0,     0, 0, 0, 0}, /* 31200bps Not support */
        { 0, 0, 0, 0,     0,     0, 0, 0, 0}, /* 33600bps Not support */
#if V34AUXCH
        { 0, 0, 0, 0,     0,     0, 0, 0, 0}, /* 2600bps Not support */
        {15, 3, 8, 7, 0x6AD4, 0x4890, 14, 1, 7}, /* 5000bps */
        {22, 10, 8, 7, 0x6AD4, 0x4080, 14, 2, 6}, /* 7400bps */
        {28, 16, 8, 7, 0x6AD4, 0x7FFE, 14, 3, 4}, /* 9800bps */
        {35, 23, 8, 7, 0x6AD4, 0x7EFC, 14, 4, 3}, /* 12200bps */
        {42, 30, 8, 7, 0x6AD4, 0x76EC, 14, 5, 2}, /* 14600bps */
        {49, 29, 8, 7, 0x6AD4, 0x6AD4, 14, 6, 1}, /* 17000bps */
        {56, 28, 8, 7, 0x6AD4, 0x54A8, 14, 7, 0}, /* 19400bps */
        {63, 27, 8, 7, 0x6AD4, 0x4890, 14, 7, 7}, /* 21800bps */
        {70, 26, 8, 7, 0x6AD4, 0x4080, 14, 8, 6}, /* 24200bps */
        {76, 24, 8, 7, 0x6AD4, 0x7FFE, 14, 9, 4}, /* 26600bps */
        { 0, 0, 0, 0,     0,     0, 0, 0, 0}, /* 29000bps Not support */
        { 0, 0, 0, 0,     0,     0, 0, 0, 0}, /* 31400bps Not support */
        { 0, 0, 0, 0,     0,     0, 0, 0, 0} /* 33800bps Not support */
#endif
    },
    /* SYMBOL rate 3000 */
    {
        { 0, 0, 0, 0,     0,     0, 0, 0, 0}, /* 2400bps Not support */
        {13, 1, 8, 7, 0xD554, 0x7BDE, 15, 1, 5}, /* 4800bps */
        {20, 8, 8, 7, 0xD554, 0x4210, 15, 2, 4}, /* 7200bps */
        {26, 14, 8, 7, 0xD554, 0x6B5A, 15, 3, 2}, /* 9600bps */
        {32, 20, 8, 7, 0xD554, 0x7FFF, 15, 4, 0}, /* 12000bps */
        {39, 27, 8, 7, 0xD554, 0x5294, 15, 4, 7}, /* 14400bps */
        {45, 25, 8, 7, 0xD554, 0x7BDE, 15, 5, 5}, /* 16800bps */
        {52, 24, 8, 7, 0xD554, 0x4210, 15, 6, 4}, /* 19200bps */
        {58, 30, 8, 7, 0xD554, 0x6B5A, 15, 7, 2}, /* 21600bps */
        {64, 28, 8, 7, 0xD554, 0x7FFF, 15, 8, 0}, /* 24000bps */
        {71, 27, 8, 7, 0xD554, 0x5294, 15, 8, 7}, /* 26400bps */
        {77, 25, 8, 7, 0xD554, 0x7BDE, 15, 9, 5}, /* 28800bps*/
        { 0, 0, 0, 0,     0,     0, 0, 0, 0}, /* 31200bps Not support */
        { 0, 0, 0, 0,     0,     0, 0, 0, 0}, /* 33600bps Not support */
#if V34AUXCH
        { 0, 0, 0, 0,     0,     0, 0, 0, 0}, /* 2600bps Not support */
        {14, 2, 8, 7, 0xD554, 0x9248, 15, 1, 6}, /* 5000bps */
        {20, 8, 8, 7, 0xD554, 0xEEEC, 15, 2, 4}, /* 7400bps */
        {27, 15, 8, 7, 0xD554, 0x8100, 15, 3, 3}, /* 9800bps */
        {33, 21, 8, 7, 0xD554, 0xD554, 15, 4, 1}, /* 12200bps */
        {39, 27, 8, 7, 0xD554, 0xFFFC, 15, 4, 7}, /* 14600bps */
        {46, 26, 8, 7, 0xD554, 0x9248, 15, 5, 6}, /* 17000bps */
        {52, 24, 8, 7, 0xD554, 0xEEEC, 15, 6, 4}, /* 19400bps */
        {59, 31, 8, 7, 0xD554, 0x8100, 15, 7, 3}, /* 21800bps */
        {65, 29, 8, 7, 0xD554, 0xD554, 15, 8, 1}, /* 24200bps */
        {71, 27, 8, 7, 0xD554, 0xFFFC, 15, 8, 7}, /* 26600bps */
        {78, 26, 8, 7, 0xD554, 0x9248, 15, 9, 6}, /* 29000bps */
        { 0, 0, 0, 0,     0,     0, 0, 0, 0}, /* 31400bps Not support */
        { 0, 0, 0, 0,     0,     0, 0, 0, 0} /* 33800bps Not support */
#endif
    },
    /* SYMBOL rate 3200 */
    {
        { 0, 0, 0, 0,     0,     0, 0, 0, 0}, /* 2400bps Not support */
        {12, 0, 8, 7, 0xAAAA, 0xFFFF, 16, 1, 4}, /* 4800bps */
        {18, 6, 8, 7, 0xAAAA, 0xFFFF, 16, 2, 2}, /* 7200bps */
        {24, 12, 8, 7, 0xAAAA, 0xFFFF, 16, 3, 0}, /* 9600bps */
        {30, 18, 8, 7, 0xAAAA, 0xFFFF, 16, 3, 6}, /* 12000bps */
        {36, 24, 8, 7, 0xAAAA, 0xFFFF, 16, 4, 4}, /* 14400bps */
        {42, 30, 8, 7, 0xAAAA, 0xFFFF, 16, 5, 2}, /* 16800bps */
        {48, 28, 8, 7, 0xAAAA, 0xFFFF, 16, 6, 0}, /* 19200bps */
        {54, 26, 8, 7, 0xAAAA, 0xFFFF, 16, 6, 6}, /* 21600bps */
        {60, 24, 8, 7, 0xAAAA, 0xFFFF, 16, 7, 4}, /* 24000bps */
        {66, 30, 8, 7, 0xAAAA, 0xFFFF, 16, 8, 2}, /* 26400bps */
        {72, 28, 8, 7, 0xAAAA, 0xFFFF, 16, 9, 0}, /* 28800bps */
        {78, 26, 8, 7, 0xAAAA, 0xFFFF, 16, 9, 6}, /* 31200bps */
        { 0, 0, 0, 0,     0,     0, 0, 0, 0}, /* 33600bps Not support */
#if V34AUXCH
        { 0, 0, 0, 0,     0,     0, 0, 0, 0}, /* 2600bps Not support */
        {13, 1, 8, 7, 0xAAAA, 0xAAAA, 16, 1, 5}, /* 5000bps */
        {19, 7, 8, 7, 0xAAAA, 0xAAAA, 16, 2, 3}, /* 7400bps */
        {25, 13, 8, 7, 0xAAAA, 0xAAAA, 16, 3, 1}, /* 9800bps */
        {31, 19, 8, 7, 0xAAAA, 0xAAAA, 16, 3, 7}, /* 12200bps */
        {37, 25, 8, 7, 0xAAAA, 0xAAAA, 16, 4, 5}, /* 14600bps */
        {43, 31, 8, 7, 0xAAAA, 0xAAAA, 16, 5, 3}, /* 17000bps */
        {49, 29, 8, 7, 0xAAAA, 0xAAAA, 16, 6, 1}, /* 19400bps */
        {55, 27, 8, 7, 0xAAAA, 0xAAAA, 16, 6, 7}, /* 21800bps */
        {61, 25, 8, 7, 0xAAAA, 0xAAAA, 16, 7, 5}, /* 24200bps */
        {67, 31, 8, 7, 0xAAAA, 0xAAAA, 16, 8, 3}, /* 26600bps */
        {73, 29, 8, 7, 0xAAAA, 0xAAAA, 16, 9, 1}, /* 29000bps */
        {79, 27, 8, 7, 0xAAAA, 0xAAAA, 16, 9, 7}, /* 31400bps */
        { 0, 0, 0, 0,     0,     0, 0, 0, 0} /* 33800bps Not support */
#endif
    },
    /* SYMBOL rate 3429 */
    {
        { 0, 0, 0, 0,     0,     0, 0, 0, 0}, /* 2400bps Not support */
        {12, 0, 7, 8, 0xAAA8, 0x4210, 15, 1, 4}, /* 4800bps */
        {17, 5, 7, 8, 0xAAA8, 0x7BDE, 15, 2, 1}, /* 7200bps */
        {23, 11, 7, 8, 0xAAA8, 0x5294, 15, 2, 7}, /* 9600bps */
        {28, 16, 7, 8, 0xAAA8, 0x7FFF, 15, 3, 4}, /* 12000bps */
        {34, 22, 7, 8, 0xAAA8, 0x6B5A, 15, 4, 2}, /* 14400bps */
        {40, 28, 7, 8, 0xAAA8, 0x4210, 15, 5, 0}, /* 16800bps */
        {45, 25, 7, 8, 0xAAA8, 0x7BDE, 15, 5, 5}, /* 19200bps */
        {51, 31, 7, 8, 0xAAA8, 0x5294, 15, 6, 3}, /* 21600bps */
        {56, 28, 7, 8, 0xAAA8, 0x7FFF, 15, 7, 0}, /* 24000bps */
        {62, 26, 7, 8, 0xAAA8, 0x6B5A, 15, 7, 6}, /* 26400bps */
        {68, 24, 7, 8, 0xAAA8, 0x4210, 15, 8, 4}, /* 28800bps */
        {73, 29, 7, 8, 0xAAA8, 0x7BDE, 15, 9, 1}, /* 31200bps */
        {79, 27, 7, 8, 0xAAA8, 0x5294, 15, 9, 7}, /* 33600bps */
#if V34AUXCH
        { 0, 0, 0, 0,     0,     0, 0, 0, 0}, /* 2600bps Not support */
        {12, 0, 7, 8, 0xAAA8, 0x6DB6, 15, 1, 4}, /* 5000bps */
        {18, 6, 7, 8, 0xAAA8, 0x4888, 15, 2, 2}, /* 7400bps */
        {23, 11, 7, 8, 0xAAA8, 0x7F7E, 15, 2, 7}, /* 9800bps */
        {29, 17, 7, 8, 0xAAA8, 0x5554, 15, 3, 5}, /* 12200bps */
        {35, 23, 7, 8, 0xAAA8, 0x4000, 15, 4, 3}, /* 14600bps */
        {40, 28, 7, 8, 0xAAA8, 0x6DB6, 15, 5, 0}, /* 17000bps */
        {46, 26, 7, 8, 0xAAA8, 0x4888, 15, 5, 6}, /* 19400bps */
        {51, 31, 7, 8, 0xAAA8, 0x7F7E, 15, 6, 3}, /* 21800bps */
        {57, 29, 7, 8, 0xAAA8, 0x5554, 15, 7, 1}, /* 24200bps */
        {63, 27, 7, 8, 0xAAA8, 0x4000, 15, 7, 7}, /* 26600bps */
        {68, 24, 7, 8, 0xAAA8, 0x6DB6, 15, 8, 4}, /* 29000bps */
        {74, 30, 7, 8, 0xAAA8, 0x4888, 15, 9, 2}, /* 31400bps */
        {79, 27, 7, 8, 0xAAA8, 0x7F7E, 15, 9, 7} /* 33800bps */
#endif
    }
};

CONST UBYTE V34_tSYM2BIT_TBL[8][8] =
{
    { 0,  0,  1,  1,  8,  8,  9,  9},
    { 3,  2,  2,  3, 11, 10, 10, 11},
    { 5,  5,  4,  4, 13, 13, 12, 12},
    { 6,  7,  7,  6, 14, 15, 15, 14},
    { 8,  8,  9,  9,  0,  0,  1,  1},
    {11, 10, 10, 11,  3,  2,  2,  3},
    {13, 13, 12, 12,  5,  5,  4,  4},
    {14, 15, 15, 14,  6,  7,  7,  6}
};


/* #define V34_S_STARTUP_LEVEL                  (QDWORD)478049 */
/* #define V34_SYMBOL_SCALE_DOWN                           512 */
/* QDQMULQD(V34_S_STARTUP_LEVEL, V34_SYMBOL_SCALE_DOWN) = 7470 */
CONST CQWORD V34_tS_POINTS[4] =
{
    { 7470,     7470},
    { 7470, -7470},
    { -7470, -7470},
    { -7470,  7470}
};


/* #define V34_STARTUP_LEVEL              (QDWORD)478049 */
/* #define V34_SYMBOL_SCALE_DOWN                     512 */
/* QDQMULQD(V34_STARTUP_LEVEL, V34_SYMBOL_SCALE_DOWN) = 7470 */
CONST CQWORD V34_tTRAIN_MAP_4[4] =
{
    { 7470,     7470},
    { 7470, -7470},
    { -7470, -7470},
    { -7470,  7470}
};

/* #define V34_STARTUP_LEVEL_16                       (QDWORD)214193 */
/* #define V34_SYMBOL_SCALE_DOWN                                 512 */
/*     QDQMULQD(V34_STARTUP_LEVEL_16, V34_SYMBOL_SCALE_DOWN) =  3347 */
/* 3 * QDQMULQD(V34_STARTUP_LEVEL_16, V34_SYMBOL_SCALE_DOWN) = 10040 */
CONST CQWORD V34_tTRAIN_MAP_16[16] =
{
    {  3347,   3347},
    {  3347,  -3347},
    { -3347,  -3347},
    { -3347,   3347},
    { -10040,   3347},
    {  3347,  10040},
    { 10040,  -3347},
    { -3347, -10040},
    {  3347, -10040},
    { -10040,  -3347},
    { -3347,  10040},
    { 10040,   3347},
    { -10040, -10040},
    { -10040,  10040},
    { 10040,  10040},
    { 10040, -10040}
};

/* expected average power level: 0.10393217 (its squar root: 0.32238513) */
/* Basic Scale is for the case with minimum set and no nonliear encoder */
CONST QDWORD V34_tBASIC_SCALE[6][14] =
{
    {478049, 368427, 261969, 184466, 130049,  92205,  65493,  46196, 32767,     0,     0,     0,     0,     0}, /* 2400 baud */

    {     0, 409722, 304018, 214307, 165026, 119025,  87844,  65543, 48407, 35634, 25966,     0,     0,     0}, /* 2743 */

    {     0, 417005, 312011, 225968, 172109, 126171,  99354,  69528, 51597, 38380, 28014,     0,     0,     0}, /* 2800 */

    {     0, 435960, 298570, 249335, 184466, 141116, 105036,  80396, 60988, 46196, 35351, 26341,     0,     0}, /* 3000 */

    {     0, 478049, 327842, 261969, 197676, 152038, 119052,  92205, 71046, 53037, 41895, 32767, 25113,     0}, /* 3200 */

    {     0, 478049, 356511, 285868, 212434, 172247, 137631, 106099, 83710, 65236, 51721, 40435, 31680, 25150}  /* 3429 */
};

CONST QWORD V34_tOFFSET_SCALE[6][14] =
{
    {    0,    0,  937,  924,  1037,  1124,  1048,  1055,  1051,     0,     0,     0,     0,     0}, /* 2400 Baud */
    {    0,    0,    0, 1555,   399,  1375,  1195,  1040,  1086,  1201,  1542,     0,     0,     0}, /* 2743 */
    {    0,    0,    0,  882,   237,   795,   854,   973,  1003,  1104,  1498,     0,     0,     0}, /* 2800 */
    {    0,    0, 3072,    0,   924,   956,  1455,  2368,  1196,  1055,   848,  1401,     0,     0}, /* 3000 */
    {    0,    0,    0,  937,  1534,  1747,  1368,  1124,  1246,  2294,  1440,  1052,  1239,     0}, /* 3200 */
    {    0,    0,    0,    0,  1864,  1161,   718,  1257,   944,  1040,  1053,  1297,   967,   791}  /* 3429 */
};

/* Offset Scale if nonliear encoder is considered */
CONST QWORD V34_tOFFSET_NL_SCALE0[6][14] =
{
    {31120, 29801, 30561, 30455, 30459, 30455, 30447, 30460, 30446,     0,     0,     0,     0,     0}, /* 2400 Baud */

    {31120, 29801, 30561, 30455, 30459, 30455, 30447, 30460, 30446, 30000, 30000,     0,     0,     0}, /* 2743 */

    {31120, 29801, 30561, 30455, 30459, 30455, 30447, 30460, 30446, 30000, 30000,     0,     0,     0}, /* 2800 */

    {    0, 30174, 30193, 30323, 30455, 30371, 30485, 30441, 30430, 30459, 30376, 30376,     0,     0}, /* 3000 */

    {    0, 31119, 29961, 30561, 30406, 30609, 30486, 30455, 30475, 30585, 30508, 30446, 30446,     0}, /* 3200 */

    {    0, 31119, 29961, 30561, 30406, 30609, 30486, 30455, 30475, 30585, 30508, 30446, 30000, 30000}  /* 3429 */
};

/* Offset scale if nonliear encoder and expanded set are both used */
CONST QWORD V34_tOFFSET_NL_SCALE1[6][14] =
{
    {31119, 29800, 30181, 30236, 30254, 30250, 30230, 30252, 30234,     0,     0,     0,     0,     0}, /* 2400 Baud */

    {    0, 30174, 29973, 30323, 30236, 30193, 30216, 30152, 30188, 30252, 30174,     0,     0,     0}, /* 2743 */

    {    0, 30174, 29973, 30323, 30236, 30193, 30216, 30152, 30188, 30252, 30174,     0,     0,     0}, /* 2800 */

    {    0, 30174, 29973, 30323, 30236, 30193, 30216, 30152, 30188, 30252, 30174, 30174,     0,     0}, /* 3000 */

    {    0, 31119, 29961, 30181, 30218, 30191, 30214, 30250, 30232, 30253, 30221, 30234, 30250,     0}, /* 3200 */

    /* ? */
    {    0, 31119, 29961, 30181, 30218, 30191, 30214, 30250, 30232, 30253, 30221, 30234, 30221, 30130}  /* 3429 */
};


/* Use Sampling Rate Converter 9600-16000 */
/* Nyquist frequency/Symbol Rate = 1.5 */
/* down scale by 4 to make the coefficients less than 1 */
CONST QDWORD V34_tPREEMP_COEF[11][7] =
{
    {    0,    0,      0, 32767,      0,    0,     0},
    { -335,  124,  -2761, 39146,  -2761,  124,  -335},
    { -830,  596,  -6623, 47249,  -6623,  596,  -830},
    { -1578, 1612, -11984, 57608, -11984, 1612, -1578},
    { -2722, 3458, -19386, 70931, -19386, 3458, -2722},
    { -4476, 6544, -29570, 88163, -29570, 6544, -4476},
    {  -75,  883,  -2092, 35447,  -2092,  883,   -75},
    { -285, 2054,  -4646, 38669,  -4646, 2054,  -285},
    { -680, 3595,  -7768, 42553,  -7768, 3595,  -680},
    { -1325, 5606, -11594, 47250, -11594, 5606, -1325},
    { -2308, 8219, -16292, 52946, -16292, 8219, -2308}
};

CONST QWORD V34_tPreempGain[6][11][2] =
{
    { /*2400 Baud */
        {32767,  32767},
        {28014,  27450},
        {23745,  22801},
        {19968,  18772},
        {16642,  15318},
        {13791,  12389},
        {31438,  30921},
        {29972,  28892},
        {28379,  26689},
        {26708,  24446},
        {24998,  22254}
    },

    { /* 2743 Baud */
        {32767,  32767},
        {28463,  28015},
        {24514,  23742},
        {20960,  19971},
        {17783,  16629},
        {14968,  13782},
        {31800,  31452},
        {30728,  29951},
        {29554,  28392},
        {28238,  26603},
        {26986,  24842}
    },

    { /*2800 Baud */
        {32767,  32767},
        {28463,  28015},
        {24514,  23742},
        {20960,  19971},
        {17783,  16629},
        {14968,  13782},
        {31800,  31452},
        {30728,  29951},
        {29554,  28392},
        {28238,  26603},
        {26986,  24842}
    },

    { /*3000 Baud */
        {32767,  32767},
        {28463,  28015},
        {24514,  23742},
        {20960,  19971},
        {17783,  16629},
        {14968,  13782},
        {31800,  31452},
        {30728,  29951},
        {29554,  28392},
        {28238,  26603},
        {26986,  24842}
    },

    { /*3200 Baud */
        {32767,  32767},
        {28652,  28461},
        {24844,  24507},
        {21381,  20955},
        {18271,  17772},
        {15516,  14993},
        {31926,  31795},
        {30980,  30712},
        {30013,  29515},
        {28975,  28243},
        {27682,  26916}
    },

    { /*3429 Baud */
        {32767,  32767},
        {28652,  28652},
        {24844,  24844},
        {21381,  21381},
        {18271,  18271},
        {15516,  15516},
        {31926,  31926},
        {30980,  30980},
        {30013,  30013},
        {28975,  28975},
        {27682,  27682}
    }
};

/* V34_tTxScaleDnFrom12dBm0 in Q7.8 */
CONST QWORD V34_tTxScaleDnFrom12dBm0[8] =
{
    422, 376, 335, 299, 266, 237, 211, 188
};

/* New Tx filter, length = 51 */
/* PSF filter with roll-off factor = 0.05 */
#if 0
CONST QWORD V34_PsfCoef[V34_PSF_DELAY_LEN + 1] =
{
    -141,  226,    -335,    480,    -689,    1033,
    -1747, 4497,   9030,    -2211,  1206,    -783,
    541,   -378,   259,     -167,   94,      10922/* 10922 is scale factor (usually 1/3: (1/3)*32768=10923) */
};/* scale_factor */

#else

CONST QWORD V34_PsfCoef[V34_PSF_DELAY_LEN + 1] =
{
    5,
    37,
    -117,
    254,
    -477,
    857,
    -1626,
    4441,
    8995,
    -2111,
    1047,
    -581,
    317,
    -155,
    59,
    -5,
    -18,
    10922
};
#endif

CONST SBYTE V34_Inverse_Map_Label[16] = { 0, 5, 4, 1, 7, 2, 3, 6, 4, 1, 0, 5, 3, 6, 7, 2 };
